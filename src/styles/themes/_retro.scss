@use "abstracts/functions" as functions;
@use "abstracts/mixins" as mixins;
@use "abstracts/colors" as colors;

.retro-theme {
  $retro-text: "Press Start 2P", monospace;
  $retro-black: #090b0d;
  $retro-white: #fbfeff;
  $playground-border-width: 2px;

  $retro-gradient: #ff0000 0%, #ff8a00 12.5%, #faff00 25%, #52ff00 37.5%,
    #00ffc2 50%, #0047ff 62.5%, #7000ff 75%, #fa00ff 87.5%, #ff0000 100%;

  font-family: $retro-text;
  color: $retro-white;

  &,
  button {
    font-family: $retro-text;
    color: $retro-white;
  }

  ion-alert .alert-wrapper {
    background-color: $retro-black;
    padding: 0.5rem 2rem;
    text-align: center;

    .alert-head {
      margin-bottom: 1.33rem;

      h2 {
        font-family: $retro-text;
        text-transform: lowercase;
        font-size: functions.responsive-size(1.33rem, 1.5rem, 0.33vw);
        text-align: center;
      }
    }

    .alert-button-group {
      flex-direction: column;

      button {
        border: 0;
        text-transform: uppercase;
        font-size: functions.responsive-size(0.75rem, 1.1rem, 0.15vw);
        color: $retro-white;
        display: block;

        span {
          justify-content: center;
          text-align: center;
        }
      }
    }
  }

  .ion-page {
    width: 100%;
    height: 100vh;

    button {
      text-transform: uppercase;
    }

    app-game-bar {
      ion-list.game-bar {
        background-color: transparent;
        padding: 0;
        border: 0;

        ion-item {
          &:nth-child(2) {
            margin: 0 2vw;
          }

          button,
          ion-badge {
            font-size: functions.responsive-size(1rem, 1.125rem, 0.2vw);
          }

          ion-badge {
            font-family: $retro-text;
            background-color: transparent;
            color: $retro-white;
          }
        }
      }
    }

    .page {
      position: relative;
      filter: brightness(1.33);
      background-color: $retro-black;

      &,
      &::before {
        --angle: 0deg;
        width: 100%;
        height: 100%;
        border: 4px solid;
        border-image-slice: 1;
        border-image-source: conic-gradient(from var(--angle), $retro-gradient);
        animation: 10s animate-border linear infinite;
      }

      &::before {
        content: "";
        filter: blur(1rem);
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
      }

      &.home .logo {
        height: functions.responsive-size(2.5rem, 3rem, 4.5vw);
        width: functions.responsive-size(15rem, 25rem, 40vw);
        background-position: center;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url("^assets/icons/retro/title.svg");
        margin-top: -9px; // adjust with page padding
      }

      h2 {
        text-transform: lowercase;
      }

      .select {
        button {
          position: relative;

          &::before,
          &::after {
            position: absolute;
            font-size: 0.66rem;
            top: 50%;
            transform: translateY(-50%);
          }

          &::after {
            content: ">";
            right: -1rem;
          }

          &::before {
            content: "<";
            left: -1rem;
          }
        }
      }

      .playground {
        &::after {
          content: "";
          height: 100%;
          position: absolute;
          width: $playground-border-width;
          top: 0;
          left: calc(50% - $playground-border-width);
          transform: translateX(-50%);
          background-color: transparent;
          border-right: calc($playground-border-width * 1.5) dashed;
          border-color: rgba($retro-white, 0.2);
        }

        app-ball div {
          background-image: url("^assets/icons/retro/ball.svg");
        }

        app-paddle div {
          background-image: url("^assets/icons/retro/paddle.svg");
        }

        app-artifact span {
          $icons: ("enlarge", "reduce", "shield");
          @each $icon in $icons {
            &.#{$icon} {
              background-image: url("^assets/icons/retro/#{$icon}.svg");
              display: inline-block;
            }
          }
        }

        app-shield div {
          width: clamp(0.2rem, 0.33vw, 0.5rem);
          background: repeating-linear-gradient(
            0,
            transparent,
            transparent 3vh,
            $retro-white 3vh,
            $retro-white 8vh
          );
        }
      }
    }
  }
}

@keyframes animate-border {
  from {
    --angle: 0deg;
  }
  to {
    --angle: 360deg;
  }
}

@property --angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}
